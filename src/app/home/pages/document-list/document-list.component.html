<app-primary-layout toolbar-title="Oficios de solicitud de tarjeta">
  <div
    *ngIf="
      documents$!
        | filterDocumentsByYear : selectedYear
        | filterDocumentsByMonth : selectedMonth
        | sortDocumentsByDate : 'asc'
        | async as documents
    "
    class="column"
  >
    <div class="row">
      <a mat-stroked-button color="primary" routerLink="crear-oficio">
        <mat-icon>add</mat-icon>
        <span>Nuevo oficio</span>
      </a>

      <div class="select-group" *ngIf="monthsOptions">
        <div class="select-content month">
          <mat-form-field appearance="outline">
            <mat-select
              [(value)]="selectedMonth"
              [disabled]="monthsOptions.length == 1"
              ariaLabel="Filtrar por mes"
            >
              <mat-option
                *ngFor="let month of monthsOptions"
                [value]="month.value"
              >
                {{ month.viewValue | titlecase }}
              </mat-option>
            </mat-select>
          </mat-form-field>
        </div>

        <div class="select-content year" *ngIf="yearsOptions">
          <mat-form-field appearance="outline">
            <mat-select
              [(value)]="selectedYear"
              [disabled]="monthsOptions.length == 1"
              ariaLabel="Filtrar por aÃ±o"
            >
              <mat-option *ngFor="let year of yearsOptions" [value]="year">
                {{ year }}
              </mat-option>
            </mat-select>
          </mat-form-field>
        </div>
      </div>
    </div>

    <app-document-list-table
      [ngClass]="{ 'fixed-height': documents.length > 11 }"
      [data]="
        documents$!
          | filterDocumentsByYear : selectedYear
          | filterDocumentsByMonth : selectedMonth
          | sortDocumentsByDate : 'asc'
      "
    ></app-document-list-table>
  </div>
</app-primary-layout>
